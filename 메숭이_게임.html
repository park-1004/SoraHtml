<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>쌀숭이 게임</title>
    <style>
        .game-board { width: 600px; height: 600px; position: relative;}
        .character { width: 100px; height: 100px; 
            position: absolute;
            display: none; 
        }
        .character:hover { cursor: pointer;}
        .character:active {opacity: 0.5;}
    </style>
</head>
<body>

    <h1>점수 : <span id="score">0</span></h1>
    <h1>남은시간: <span id="time">30</span></h1>
    <div class="game-board">
        <img src="쌀숭이.jpg" class="character" id="monkey1" alt="">
        <img src="쌀숭이2.jpg" class="character" id="monkey2" alt="">
        <img src="쌀숭이3.jpg" class="character" id="monkey3" alt="">
        <img src="쌀숭이4.png" class="character" id="monkey4" alt="">
        <img src="쌀숭이5.png" class="character" id="monkey5" alt="">
        <img src="쌀숭이6.jpg" class="character" id="monkey6" alt="">
        <img src="쌀숭이7.jpg" class="character" id="monkey7" alt="">
        <img src="쌀숭이8.png" class="character" id="monkey8" alt="">        
        <img src="신창섭.jpg" class="character" id="god" alt="">
    </div>
    <script>
let score = 0;
let time = 60;
let gameInterval;
let timeDecreaseInterval;
const spanScore = document.getElementById('score');
const spanTime = document.getElementById('time');

if (confirm("쌀숭이 사냥 시작?")) {
    gameInterval = setInterval(showCharacters, 1000);
    timeDecreaseInterval = setInterval(decreaseTime, 1000);
} else {
    location.reload();
}

const monkeyImages = [];
const n = 7;
for (let i = 1; i <= n; i++) {
    monkeyImages.push(document.getElementById(`monkey${i}`));
}
const god = document.getElementById('god');
const characters = [...monkeyImages, god];
const gameBoard = document.querySelector('.game-board'); // Get the game board element

function showCharacters() {
    // Array to keep track of occupied positions
    const occupiedPositions = [];

    characters.forEach(character => {
        let position;
        do {
            position = randomPosition();
        } while (isPositionOccupied(position, occupiedPositions)); // Ensure no overlap

        character.style.left = `${position.x}px`;
        character.style.top = `${position.y}px`;
        character.style.display = "block";
        occupiedPositions.push(position); // Add current position to occupied positions
    });

    setTimeout(hideCharacters, 500);
}

function hideCharacters() {
    characters.forEach(character => {
        character.style.display = "none";
    });
}

function randomPosition() {
    const maxX = gameBoard.offsetWidth - 100; // Subtract character width
    const maxY = gameBoard.offsetHeight - 100; // Subtract character height
    let x = Math.floor(Math.random() * maxX);
    let y = Math.floor(Math.random() * maxY);
    return { x, y };
}

function isPositionOccupied(position, occupiedPositions) {
    for (const occupiedPosition of occupiedPositions) {
        const dx = Math.abs(position.x - occupiedPosition.x);
        const dy = Math.abs(position.y - occupiedPosition.y);
        const minDistance = 80; // Minimum distance between characters (adjust as needed)

        if (dx < minDistance && dy < minDistance) {
            return true; // Positions are too close
        }
    }
    return false; // Position is not occupied
}


monkeyImages.forEach(monkey => {
    monkey.addEventListener("click", function() {
        score++;
        spanScore.innerHTML = score;
    });
});

god.addEventListener("click", function() {
    score--;
    spanScore.innerHTML = score;
});

function decreaseTime() {
    time--;
    spanTime.innerHTML = time;
    if (time === 0) {
        clearInterval(gameInterval);
        clearInterval(timeDecreaseInterval);
        alert(`게임 종료! 당신의 처리한 쌀숭이의 수는 ${score}마리 입니다.`);
        location.reload();
    }
}

    </script>
</body>
</html>
